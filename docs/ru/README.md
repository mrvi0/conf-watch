# ConfWatch üîç

[English](../../README.md) | [–†—É—Å—Å–∫–∏–π](README.md)

---

## –ß—Ç–æ —Ç–∞–∫–æ–µ ConfWatch?

ConfWatch ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö —Å–∏—Å—Ç–µ–º—ã, –≤–µ–¥–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –≤–µ—Ä—Å–∏–π –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –æ—Ç–∫–∞—Ç–∞ –∫ –ø—Ä–µ–¥—ã–¥—É—â–∏–º –≤–µ—Ä—Å–∏—è–º.

### üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
curl -fsSL https://raw.githubusercontent.com/yourusername/conf-watch/main/install.sh | bash
```

–£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –≤–∞—à—É —Å–∏—Å—Ç–µ–º—É –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø–æ–¥—Ö–æ–¥—è—â—É—é –≤–µ—Ä—Å–∏—é:
- **Python –≤–µ—Ä—Å–∏—è** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω Python 3.8+) - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- **Bash –≤–µ—Ä—Å–∏—è** (–∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç) - –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### üß† –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üìÅ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö (`.bashrc`, `/etc/nginx/nginx.conf`, `.env`, `~/.config/`, –∏ —Ç.–¥.)
- **üíæ –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∂–¥—É—é –≤–µ—Ä—Å–∏—é –≤ SQLite –∏–ª–∏ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- **üîç –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–∑–ª–∏—á–∏–π**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- **‚Ü©Ô∏è –û—Ç–∫–∞—Ç**: –õ–µ–≥–∫–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–∏–º –≤–µ—Ä—Å–∏—è–º
- **üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram, email –∏ –¥—Ä—É–≥–∏–µ –∫–∞–Ω–∞–ª—ã
- **üè∑Ô∏è –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–π**: –ü–æ–º–µ—á–∞–π—Ç–µ —Å–Ω–∞–ø—à–æ—Ç—ã –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- **üîí –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ö—Ä–∞—Å–∏–≤—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
- **üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –º–∞—à–∏–Ω–∞–º–∏

### üß™ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

#### 1. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
ConfWatch –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø—É—Ç–∏ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```yaml
watch:
  - ~/.bashrc
  - ~/.config/nvim/init.vim
  - /etc/nginx/nginx.conf
  - ~/projects/.env
```

#### 2. –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
–ö–∞–∂–¥—ã–π —Ñ–∞–π–ª —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è (SHA256) –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π. –ï—Å–ª–∏ —Ö–µ—à –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–æ–≤–∞—è –∫–æ–ø–∏—è.

#### 3. –í–∞—Ä–∏–∞–Ω—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è
- **Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: –ü—Ä–æ—Å—Ç–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–æ—Å—Ç–æ–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –ª–µ–≥–∫–∞—è –≤–µ–±-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∂–∞—Ç–∏—è

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
curl -fsSL https://raw.githubusercontent.com/yourusername/conf-watch/main/install.sh | bash
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞**
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/yourusername/conf-watch.git
cd conf-watch

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
./install.sh
```

–£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç –ª—É—á—à—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã:
- **Python –≤–µ—Ä—Å–∏—è**: –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
- **Bash –≤–µ—Ä—Å–∏—è**: –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è, —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π —Å–Ω–∞–ø—à–æ—Ç
confwatch snapshot

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–∑–ª–∏—á–∏–π
confwatch diff ~/.bashrc

# –ü–æ–º–µ—Ç–∏—Ç—å –≤–µ—Ä—Å–∏—é —Ç–µ–≥–æ–º
confwatch tag ~/.bashrc "–ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ nvm"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
confwatchd --config ~/confwatch.yml
```

### üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `~/.confwatch/config.yml`:

```yaml
# –§–∞–π–ª—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
watch:
  - ~/.bashrc
  - ~/.zshrc
  - ~/.config/nvim/init.vim
  - /etc/nginx/nginx.conf
  - ~/projects/.env

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è
storage:
  type: "sqlite"  # –∏–ª–∏ "git"
  path: "~/.confwatch/database.db"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
notifications:
  telegram:
    enabled: true
    bot_token: "YOUR_BOT_TOKEN"
    chat_id: "YOUR_CHAT_ID"
  email:
    enabled: false
    smtp_server: "smtp.gmail.com"
    smtp_port: 587
    username: "your-email@gmail.com"
    password: "your-app-password"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
monitoring:
  interval: 300  # —Å–µ–∫—É–Ω–¥—ã
  auto_test:
    nginx: "nginx -t"
    apache: "apache2ctl configtest"
```

### üîç –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–Ω–∞–ø—à–æ—Ç
confwatch snapshot

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–∑–ª–∏—á–∏–π
confwatch diff /etc/hosts

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π
confwatch history ~/.bashrc

# –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
confwatch rollback ~/.bashrc --version 3
```

#### –†–µ–∂–∏–º –¥–µ–º–æ–Ω–∞
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
confwatchd --config ~/confwatch.yml

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –¥–µ–º–æ–Ω–∞
confwatchd status

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ–º–æ–Ω
confwatchd stop
```

### üéØ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–π
```bash
# –ü–æ–º–µ—Ç–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
confwatch tag ~/.bashrc "–ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ nodejs"

# –°–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤
confwatch tags ~/.bashrc

# –û—Ç–∫–∞—Ç –∫ –ø–æ–º–µ—á–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
confwatch rollback ~/.bashrc --tag "–ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ nodejs"
```

#### –ê–≤—Ç–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
```bash
# –¢–µ—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
confwatch auto-test nginx

# –¢–µ—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ apache
confwatch auto-test apache
```

#### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –í–∫–ª—é—á–∏—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
confwatch encrypt ~/.env

# –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
confwatch decrypt ~/.env
```

### üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**Bash –≤–µ—Ä—Å–∏—è:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
confwatch web
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8080
```

**Python –≤–µ—Ä—Å–∏—è:**
```bash
confwatch web
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:5000
```

### üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
conf-watch/
‚îú‚îÄ‚îÄ python/                    # Python-–≤–µ—Ä—Å–∏—è (–ø–æ–ª–Ω–∞—è)
‚îÇ   ‚îú‚îÄ‚îÄ confwatch/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scanner.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ diff.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cli/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ daemon/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ web/
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ bash/                      # Bash-–≤–µ—Ä—Å–∏—è (–ª–µ–≥–∫–∞—è)
‚îÇ   ‚îú‚îÄ‚îÄ confwatch             # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
‚îÇ   ‚îú‚îÄ‚îÄ confwatchd            # –î–µ–º–æ–Ω
‚îÇ   ‚îî‚îÄ‚îÄ web/
‚îÇ       ‚îú‚îÄ‚îÄ index.html        # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ       ‚îî‚îÄ‚îÄ webserver.sh      # –í–µ–±-—Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ ru/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ   ‚îî‚îÄ‚îÄ en/
‚îú‚îÄ‚îÄ install.sh                 # –£–º–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
‚îú‚îÄ‚îÄ uninstall.sh              # –°–∫—Ä–∏–ø—Ç —É–¥–∞–ª–µ–Ω–∏—è

‚îú‚îÄ‚îÄ LICENSE                    # –õ–∏—Ü–µ–Ω–∑–∏—è MIT
‚îî‚îÄ‚îÄ README.md
```

### üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä—É—á–Ω—É—é

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/yourusername/conf-watch.git
cd conf-watch
./install.sh
```

### üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT ‚Äî —Å–º. —Ñ–∞–π–ª [LICENSE](../../LICENSE). 